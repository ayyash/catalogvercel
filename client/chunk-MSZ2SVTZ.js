import{e as pe,g as f}from"./chunk-O2YGMG24.js";import{$ as F,Aa as ie,Ba as oe,D as B,E as L,G as W,Ga as T,H as z,Ha as V,N as J,O as s,Oa as $,Q as x,Qa as ne,R as _,Ra as ae,Sa as re,Ta as le,U as Q,Ua as y,W as C,Z as X,_a as se,a as G,b as Y,da as M,e as q,ha as l,i as K,ia as n,ib as ce,ja as A,jb as de,ma as U,na as u,oa as P,pa as Z,qa as ee,qb as k,sa as te,w as E,xa as a,ya as g,z as b,za as I}from"./chunk-FKNLQJGV.js";var R=class i{transform(t,e=!1){let o=new Date().valueOf(),r=t.valueOf(),d=60*1e3,c=d*60,m=c*24,w=m*30,S=m*365,p=Math.abs(r-o),v=t.toString(),h=f.Plural("YEARS",Math.round(p/S),v);return p<d?h=f.Plural("SECONDS",Math.round(p/1e3),v):p<c?h=f.Plural("MINUTES",Math.round(p/d),v):p<m?h=f.Plural("HOURS",Math.round(p/c),v):p<w?h=f.Plural("DAYS",Math.round(p/m),v):p<S&&(h=f.Plural("MONTHS",Math.round(p/w),v)),(e?f.Get("INTIME"):f.Get("TIMEAGO")).replace("$0",h)}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=Q({name:"relativetime",type:i,pure:!0})};var j=class i{constructor(t){this.router=t}data;dialog;ngOnInit(){}route(){this.router.navigateByUrl("/profiles/"+this.data.id),this.dialog.close()}static \u0275fac=function(e){return new(e||i)(x(ce))};static \u0275cmp=_({type:i,selectors:[["cl-profile-card-dialog"]],decls:13,vars:1,consts:[[1,"grid","g-1"],[1,"f4","spaced","weight-normal","a",3,"click"],[1,"breath"]],template:function(e,o){e&1&&(l(0,"div",0)(1,"div"),a(2,"profile"),n(),l(3,"div")(4,"h5",1),u("click",function(){return o.route()}),a(5),n(),a(6," email@address.com "),A(7,"br"),a(8," +293998383838 "),A(9,"br"),l(10,"p",2),a(11," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Nisi dolorum dicta atque ipsum "),n(),a(12," 3 ideas . 1 active "),n()()),e&2&&(s(5),g(o.data.name))},dependencies:[y,k],encapsulation:2,changeDetection:0})};var ge=["*"],O=class i{onClose=new z;options;close(t){this.onClose.emit(t)}onClick(t){t.matches(".d-overlay")&&this.close(null)}onEscape(t){t.code==="Escape"&&this.close(null)}onMouseDown(t){t.matches(".d-overlay, .modal-dialog, .modal")&&!this.options.ismodal&&this.close(null)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["ct-dialog"]],hostBindings:function(e,o){e&1&&u("click",function(d){return o.onClick(d.target)})("keydown",function(d){return o.onEscape(d)},!1,J)("mousedown",function(d){return o.onMouseDown(d.target)})},outputs:{onClose:"onClose"},ngContentSelectors:ge,decls:8,vars:1,consts:[[1,"modal-overlay","d-overlay"],["role","dialog","aria-labelledby","dialogtitle","tabindex","-1",1,"modal"],[1,"modal-header"],["id","dialogtitle",1,"f6","modal-title"],["type","button",1,"modal-close",3,"click"],[1,"modal-body"]],template:function(e,o){e&1&&(Z(),l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3),a(4),n(),l(5,"button",4),u("click",function(){return o.close()}),n()(),l(6,"div",5),ee(7),n()()()),e&2&&(s(4),g(o.options==null?null:o.options.title))},dependencies:[y],encapsulation:2,changeDetection:0})};var N=class i{constructor(t,e){this.appRef=t;this.doc=e}dialogs={};open(t,e){let o=e?.providers?.length?W.create({providers:e.providers}):void 0,r=$(t,{environmentInjector:this.appRef.injector,elementInjector:o});this.appRef.attachView(r.hostView);let d=r.hostView.rootNodes,c=$(O,{environmentInjector:this.appRef.injector,projectableNodes:[d]}),m=c.hostView.rootNodes[0];e?.id&&(m.id=e.id,this.dialogs[e.id]=c.instance),e?.css&&m.classList.add(...e.css.split(" ")),this.doc.body.append(m),this.appRef.attachView(c.hostView),c.instance.options=Y(G({},e),{ismodal:e?.ismodal||!1,title:e?.title||""}),r.instance.data=e?.data,r.instance.dialog=c.instance,r.instance.dialogElement=m;let w=c.instance.onClose.subscribe(S=>{e?.onclose&&e.onclose(S),this.appRef.detachView(c.hostView),c.destroy(),this.appRef.detachView(r.hostView),r.destroy(),e?.id&&delete this.dialogs[e.id],w.unsubscribe()});return r.instance}get(t){return this.dialogs[t]||null}static \u0275fac=function(e){return new(e||i)(b(X),b(ne))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};var H=class i{constructor(t){this._http=t}_changeUrl=pe.API.vote.change;ChangeVote(t){let e=this._changeUrl.replace(":id",t);return this._http.post(e,{}).pipe(K(o=>o))}static \u0275fac=function(e){return new(e||i)(b(se))};static \u0275prov=E({token:i,factory:i.\u0275fac,providedIn:"root"})};function _e(i,t){if(i&1){let e=U();l(0,"div",3)(1,"a",14),u("click",function(){B(e);let r=P(2);return L(r.vote())}),l(2,"i",15),a(3,"vote"),n()()()}}function Ce(i,t){if(i&1&&(a(0),T(1,"relativetime")),i&2){let e=P(2);I(" Created ",V(1,1,e.post.created)," | ")}}function Pe(i,t){if(i&1&&(l(0,"div",16),a(1),n()),i&2){let e=P(2);s(),I(" ",e.post.excerpt," ")}}function ye(i,t){if(i&1&&(l(0,"li",17)(1,"a",18),a(2),n()()),i&2){let e=t.$implicit;s(2),g(e.id)}}function be(i,t){if(i&1){let e=U();l(0,"div",0)(1,"div",1),oe(2),T(3,"async"),l(4,"div",2),a(5),n(),C(6,_e,4,0,"div",3),n(),l(7,"div",4)(8,"h5",5)(9,"a",6),a(10),n()(),l(11,"div",7),C(12,Ce,2,3),a(13),T(14,"relativetime"),n(),C(15,Pe,2,1,"div",8),l(16,"div",3)(17,"i",9),a(18,"comment"),n(),a(19),n(),l(20,"div",10)(21,"ul",11),C(22,ye,3,1,"li",12),n(),l(23,"div",13)(24,"i",9),a(25,"user"),n(),a(26,"\xA0"),l(27,"a",14),u("click",function(){B(e);let r=P();return L(r.openProfile(r.post.author.displayname,r.post.author.username))}),a(28),n()()()()()}if(i&2){let e=P(),o=V(3,12,e.votes$);s(5),I("+",o,""),s(),M(e.mode.full?6:-1),s(3),te("routerLink","/posts/",e.post.id,""),s(),g(e.post.title),s(2),M(e.mode.full?12:-1),s(),I(" Last updated ",V(14,14,e.post.updated)," "),s(2),F("ngIf",!e.mode.full),s(4),ie(" ",e.post.stats.comments," . ",e.post.status.value," "),s(3),F("ngForOf",e.post.tags),s(6),g(e.post.author.displayname)}}var fe=class i{constructor(t,e){this.dialog=t;this.voteSevrice=e}mode={full:!1};post;votes$=new q(0);ngOnInit(){this.votes$.next(this.post?.stats?.votes)}openProfile(t,e){this.dialog.open(j,{data:{name:t,id:e},css:"modal-bottom-sheet animate frombottom",title:t})}vote(){this.voteSevrice.ChangeVote(this.post.id).subscribe({next:t=>{this.votes$.next(t)}})}static \u0275fac=function(e){return new(e||i)(x(N),x(H))};static \u0275cmp=_({type:i,selectors:[["cl-post-card"]],inputs:{mode:"mode",post:"post"},decls:1,vars:1,consts:[[1,"grid","g-2"],[1,"vote","txt-c"],[1,"f4"],[1,"breath"],[1,"content"],[1,"f5"],[3,"routerLink"],[1,"weight-bold"],["class","light",4,"ngIf"],[1,"liga"],[1,"card"],[1,"row","row-gap"],["class","label label-grey-light",4,"ngFor","ngForOf"],[1,"tail"],[3,"click"],[1,"f4","liga"],[1,"light"],[1,"label","label-grey-light"],["routerLink","posts"]],template:function(e,o){e&1&&C(0,be,29,16,"div",0),e&2&&M(o.post?0:-1)},dependencies:[y,ae,re,le,k,de,R],encapsulation:2,changeDetection:0})};export{R as a,fe as b};
