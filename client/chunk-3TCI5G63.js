import"./chunk-K7TQ6VIG.js";import{a as E}from"./chunk-RQJZCFNJ.js";import{a as Z,b as Q,c as tt,d as et,e as it,f as nt,g as ot,h as at,i as rt,j as st,k as pt,l as mt}from"./chunk-ZN6X6JPW.js";import{a as X,g as I}from"./chunk-MXNVAF7S.js";import{$ as m,Aa as u,D as $,E as B,H as S,Ma as b,Na as w,O as s,Pa as c,Q as x,R as l,Va as K,W as g,a as G,ea as J,eb as D,fa as z,ga as W,ha as n,i as C,ia as o,ja as p,lb as d,ma as Y,na as F,oa as O,w as H,wa as a,ya as N,z as j}from"./chunk-TXYH6DN2.js";var ct=()=>[1,2,3,4,5];function dt(i,t){i&1&&(n(0,"span",6)(1,"i",7),a(2,"delete"),o()())}function ut(i,t){if(i&1&&(n(0,"li")(1,"a",3),p(2,"div",4),a(3),g(4,dt,3,0,"span",5),o()()),i&2){let e=t.$implicit,r=O();s(3),N(" file",e," "),s(),m("ngIf",r.mode.forEdit)}}function ft(i,t){i&1&&(n(0,"li")(1,"a",3),p(2,"div",4),n(3,"i",7),a(4,"add"),o(),a(5," Add file "),o()())}var y=class i{mode={forEdit:!1};constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-file-list"]],inputs:{mode:"mode"},decls:3,vars:3,consts:[[1,"row","row-gap","umd-2","uc-5"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"dblock","box","box-white"],[1,"h-2","box","box-grey","spaced"],["class","lbreath",4,"ngIf"],[1,"lbreath"],[1,"liga"]],template:function(e,r){e&1&&(n(0,"ul",0),g(1,ut,5,2,"li",1)(2,ft,6,0,"li",2),o()),e&2&&(s(),m("ngForOf",u(2,ct)),s(),m("ngIf",r.mode.forEdit))},dependencies:[c,b,w,d],encapsulation:2,changeDetection:0})};var gt=()=>[1,2,3,4];function It(i,t){if(i&1&&(n(0,"li"),a(1),o()),i&2){let e=t.$implicit;s(),N("item",e," [remove]")}}var M=class i{id;onSomething=new S;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-tag-list"]],inputs:{id:"id"},outputs:{onSomething:"onSomething"},decls:4,vars:2,consts:[[1,"row","row-gap"],[4,"ngFor","ngForOf"]],template:function(e,r){e&1&&(n(0,"ul",0),g(1,It,2,1,"li",1),n(2,"li"),a(3,"+ Add new tag"),o()()),e&2&&(s(),m("ngForOf",u(1,gt)))},dependencies:[c,b,d],encapsulation:2,changeDetection:0})};var ht=()=>({forEdit:!0}),_=class i{constructor(t,e){this.fb=t;this.toast=e}mode={forNew:!0};post;onSave=new S;onCancel=new S;postForm;ngOnInit(){this.postForm=this.fb.group({title:[],body:[],tags:[]}),this.post&&this.postForm.patchValue(this.post)}compareFn(t,e){return t&&e?t.id==e.id:!1}savePost(){if(this.toast.Hide(),this.postForm.valid){let t=this.postForm.value,e=G({},t);this.onSave.emit(e)}else this.toast.ShowError("INVALID_FORM")}static \u0275fac=function(e){return new(e||i)(x(at),x(st))};static \u0275cmp=l({type:i,selectors:[["cl-post-form"]],inputs:{mode:"mode",post:"post"},outputs:{onSave:"onSave",onCancel:"onCancel"},decls:13,vars:5,consts:[["novalidate","",3,"ngSubmit","formGroup"],["placeholder","Title"],["type","text","id","title","crinput","","formControlName","title",1,"cr-input","w100",3,"required"],[1,"spaced"],["placeholder","Start writing..."],["id","body","formControlName","body","crinput","",1,"cr-input","w100","h-5",3,"required"],[1,"f5","spaced"],[3,"mode"],[1,"spacetop"],["type","submit",1,"btn-rev"]],template:function(e,r){e&1&&(n(0,"form",0),F("ngSubmit",function(){return r.savePost()}),n(1,"cr-input",1),p(2,"input",2),o(),p(3,"cl-tag-list"),n(4,"div",3)(5,"cr-input",4),p(6,"textarea",5),o()(),n(7,"h5",6),a(8," Attachments "),o(),p(9,"cl-file-list",7),n(10,"div",8)(11,"button",9),a(12,"Save"),o()()()),e&2&&(m("formGroup",r.postForm),s(2),m("required",!0),s(4),m("required",!0),s(3),m("mode",u(4,ht)))},dependencies:[c,d,rt,et,Z,Q,tt,ot,it,nt,pt,mt,M,y],encapsulation:2,changeDetection:0})};var T=class i{id;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-post-create"]],inputs:{id:"id"},decls:3,vars:0,consts:[[1,"page"],[1,"container"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1),p(2,"cl-post-form"),o()())},dependencies:[c,d,_],encapsulation:2,changeDetection:0})};var vt=()=>[1,2,3,4,5];function Pt(i,t){i&1&&(n(0,"div",10),p(1,"cl-comment-list"),o())}function Ct(i,t){if(i&1){let e=Y();n(0,"li")(1,"div",2)(2,"div")(3,"i",3),a(4,"profile"),o()(),n(5,"div")(6,"span",6),a(7,"Johansen Defferson . 2 days ago"),o(),n(8,"div",7)(9,"strong"),a(10,"Updated:"),o(),a(11," added Lorem ipsum dolor sit amet consectetur adipisicing elit. Quidem, "),o(),n(12,"div",8),F("click",function(){$(e);let f=O();return B(f.showReplies=!0)}),n(13,"i",3),a(14,"comment"),o(),a(15," 2"),o(),g(16,Pt,2,0,"div",9),o()()()}if(i&2){let e=O();s(16),m("ngIf",e.showReplies)}}var A=class i{id;showReplies=!1;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-comment-list"]],inputs:{id:"id"},decls:12,vars:2,consts:[[1,"row-list"],[4,"ngFor","ngForOf"],[1,"grid","g-1"],[1,"liga"],[1,"cr-field"],["type","text","placeholder","Write a comment...",1,"cr-input","c-10"],[1,"smaller"],[1,"breath"],[1,"spaced",3,"click"],["class","box",4,"ngIf"],[1,"box"]],template:function(e,r){e&1&&(n(0,"ul",0),g(1,Ct,17,1,"li",1),n(2,"li")(3,"div",2)(4,"div")(5,"i",3),a(6,"profile"),o()(),n(7,"div",4),p(8,"input",5),a(9,"\xA0 "),n(10,"a",3),a(11,"send"),o()()()()()),e&2&&(s(),m("ngForOf",u(1,vt)))},dependencies:[i,c,b,w,d],encapsulation:2,changeDetection:0})};var yt=()=>({full:!0}),R=class i{id;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-post-details"]],inputs:{id:"id"},decls:16,vars:2,consts:[[1,"page"],[1,"container"],[1,"box","box-grey-light","card","spaced"],[1,"tail"],[1,"dev"],["routerLink","/posts/edit/34342"],[1,"spaced","dblock",3,"mode"],[1,"spaced"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),a(3," This is a draft. "),n(4,"div",3)(5,"span",4),a(6,"depending on status"),o(),n(7,"a",5),a(8,"Edit"),o(),a(9," | Publish | Delete "),o()(),p(10,"cl-post-card",6),n(11,"div",7),a(12," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Inventore hic eligendi modi quae eos. Quisquam, consectetur est. Esse quam recusandae ab minima quidem quas aliquid, quae eum magnam, atque expedita! "),o(),n(13,"div",7),p(14,"cl-file-list"),o(),p(15,"cl-comment-list"),o()()),e&2&&(s(10),m("mode",u(1,yt)))},dependencies:[c,d,D,E,A,y],encapsulation:2,changeDetection:0})};var _t=()=>({forEdit:!0}),St=()=>({title:"a title",body:"sombody",tags:""}),V=class i{id;constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=l({type:i,selectors:[["cl-post-edit"]],inputs:{id:"id"},decls:3,vars:4,consts:[[1,"page"],[1,"container"],[3,"mode","post"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1),p(2,"cl-post-form",2),o()()),e&2&&(s(2),m("mode",u(2,_t))("post",u(3,St)))},dependencies:[c,d,_],encapsulation:2,changeDetection:0})};var q=class{static MapSearchListOptions(t){return t}static MapQueryListOptions(t){let e,r=t.subpath;if(t.resourceType&&t.resourceType!=="folder"){let f=t.subpath.split("/");e=f.slice(-1),r=f.slice(0,-1).join("/")}return{type:t.type||"search",space_name:t.space||I.API.rootSpace,subpath:r||"/",filter_shortnames:e||null,search:t.keyword||"",limit:t.size||100,exact_subpath:!0,sort_type:"descending",sort_by:"resource_type",retrieve_json_payload:t.withPayload||!1}}static MapEntryListOptions(t){return{retrieve_json_payload:t.withPayload||!1,retrieve_attachments:t.withAttachments||!1,validate_schema:!0}}static MapResourceUrlListOptions(t,e){return t.replace(":resource",e.resourceType||"content").replace(":space",e.space).replace(":subpath",e.subpath)}},L=class{mapper;NewDataList(t){return{total:t.attributes?.total,matches:t.records?.map(this.mapper)}}};var v=class i{static NewInstance(t){return{id:t.id}}static NewInstances(t){return t.map(i.NewInstance)}static NewList(t){let e=new L;return e.mapper=i.NewInstance,e.NewDataList(t)}static PrepCreate(t){return{id:t.id}}static PrepSave(t){return{id:t.id}}};var U=class i{constructor(t){this._http=t}_listUrl=I.API.post.list;_detailsUrl=I.API.post.details;_createUrl=I.API.post.create;_saveUrl=I.API.post.save;_deleteUrl=I.API.post.delete;GetPosts(t={}){let e=X(q.MapSearchListOptions(t)),r=this._listUrl.replace(":options",e);return this._http.get(r).pipe(C(f=>v.NewList(f)))}GetPost(t){let e=this._detailsUrl.replace(":id",t);return this._http.get(e).pipe(C(r=>v.NewInstance(r)))}CreatePost(t){let e=this._createUrl,r=v.PrepCreate(t);return _debug(r,"CreatePost data"),this._http.post(e,r).pipe(C(f=>v.NewInstance(f)))}SavePost(t){let e=this._saveUrl.replace(":id",t.id),r=v.PrepSave(t);return _debug(r,"SavePost data"),this._http.put(e,r).pipe(C(f=>t))}DeletePost(t){let e=this._deleteUrl.replace(":id",t.id);return this._http.delete(e).pipe(C(r=>!0))}static \u0275fac=function(e){return new(e||i)(j(K))};static \u0275prov=H({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ot=()=>[1,2,3,4,5];function Lt(i,t){i&1&&(n(0,"li"),p(1,"cl-post-card"),o())}var k=class i{constructor(t){this.postService=t}ngOnInit(){}static \u0275fac=function(e){return new(e||i)(x(U))};static \u0275cmp=l({type:i,selectors:[["cl-post"]],decls:7,vars:1,consts:[[1,"page"],[1,"container"],["routerLink","/posts/create",1,"btn","btn-diff"],[1,"rowlist"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),a(3,"Create a new idea"),o(),n(4,"ul",3),z(5,Lt,2,0,"li",null,J),o()()()),e&2&&(s(5),W(u(0,Ot)))},dependencies:[c,d,D,E],encapsulation:2,changeDetection:0})};var ii=[{path:"",component:k},{path:"create",component:T},{path:"edit/:id",component:V},{path:":id",component:R}];export{ii as PostRoutes};
