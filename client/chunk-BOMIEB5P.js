import{b as W}from"./chunk-RCT625XJ.js";import{$ as c,D as g,E as h,Ga as U,Ha as j,M as k,O as r,Oa as F,Q as P,R as y,Ra as A,Sa as G,Ta as z,Ua as $,W as m,Z as O,a as s,aa as M,b as w,ba as E,ca as R,g as C,h as I,ha as d,ia as l,ka as V,l as b,la as H,ma as _,na as v,oa as B,vb as Y,w as T,xa as D,xb as p,ya as N,z as S}from"./chunk-2RYABZQO.js";var x=(e=>(e[e.Short=Y.Basic.defaultToastTimeout]="Short",e[e.Long=2e4]="Long",e[e.Never=-1]="Never",e))(x||{});function Z(i,n){if(i&1){let t=_();d(0,"button",5),v("click",function(o){let a=g(t).$implicit;return h(a==null?null:a.click(o))}),D(1),l()}if(i&2){let t=n.$implicit;E(t.css),r(),N(t.text)}}function q(i,n){if(i&1&&(d(0,"div",3),m(1,Z,2,3,"button",4),l()),i&2){let t=B().ngIf;r(),c("ngForOf",t.buttons)}}function J(i,n){if(i&1){let t=_();V(0),d(1,"div")(2,"div",1),v("click",function(o){let a=g(t).ngIf;return h(a.clickable&&a.clickable(o))}),l(),m(3,q,2,1,"div",2),l(),H()}if(i&2){let t=n.ngIf;r(),R("",t.css," ",t.extracss,""),M("inview",t.visible),r(),c("innerHtml",t.text,k),r(),c("ngIf",t.buttons==null?null:t.buttons.length)}}var f=class i{constructor(n){this.toastState=n}static \u0275fac=function(t){return new(t||i)(P(u))};static \u0275cmp=y({type:i,selectors:[["sh-toast"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"text",3,"click","innerHtml"],["class","buttons",4,"ngIf"],[1,"buttons"],[3,"class","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,e){t&1&&(m(0,J,4,8,"ng-container",0),U(1,"async")),t&2&&c("ngIf",j(1,1,e.toastState.stateItem$))},dependencies:[$,A,G,z],styles:[".toast[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;background-color:#263238;color:#fff;position:fixed;bottom:2.4rem;left:2.4rem;right:2.4rem;font-size:90%;z-index:5100;box-shadow:0 6px 10px #00000024,0 1px 18px #0000001f,0 3px 5px -1px #0000004d;transform:translateY(calc(100% + 2.4rem));transition:transform .2s ease-in-out}.toast.error[_ngcontent-%COMP%]{background-color:#f31109}.toast.success[_ngcontent-%COMP%]{background-color:#57b347}.toast.warning[_ngcontent-%COMP%]{background-color:#ffc400;color:#202020}.toast.inview[_ngcontent-%COMP%]{transform:translateY(0)}.text[_ngcontent-%COMP%]{padding:2.4rem;margin-right:1.2rem;flex-basis:100%}.buttons[_ngcontent-%COMP%]{display:flex}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;padding:2.4rem;cursor:pointer;color:inherit;display:block}@media only screen and (min-width: 720px){.toast[_ngcontent-%COMP%]{max-width:50vw}}"],changeDetection:0})};var u=class i extends W{constructor(t){super();this.appRef=t;this.SetState(s({},this.defaultOptions))}isCanceled;created;addComponent(){let t=F(f,{environmentInjector:this.appRef.injector});this.appRef.attachView(t.hostView),document.body.append(t.hostView.rootNodes[0]),this.created=!0}dismissButton={css:"btn-close",text:p.Get("Dismiss"),click:t=>{this.Hide()}};defaultOptions={css:"toast",extracss:"",text:p.Get("ToastError"),timeout:x.Short,buttons:[this.dismissButton],visible:!1};Show(t,e){this.created||this.addComponent(),this.Hide();let o=s(s({},this.defaultOptions),e),a=p.Get(t,e?.text||p.Get("Unknown"));b(100).subscribe(()=>{this.SetState(w(s({},o),{text:a,visible:!0}))}),o.timeout&&o.timeout>-1&&(this.isCanceled=b(o.timeout).subscribe(()=>{this.Hide()}))}ShowError(t,e){this.Show(t,s({extracss:"error"},e))}ShowSuccess(t,e){this.Show(t,s({extracss:"success"},e))}ShowWarning(t,e){this.Show(t,s({extracss:"warning"},e))}Hide(){this.isCanceled&&this.isCanceled.unsubscribe(),this.UpdateState({visible:!1})}HandleUiError(t,e){if(t.code){switch(t.status){case 500:this.ShowError("Unknown",e);break;case 400:this.ShowError(t.code,e);break;case 401:case 403:this.Show("UNAUTHORIZED",e);break;case 404:this.ShowWarning(t.code,e);break;default:this.ShowError(t.code,e)}return C(null)}else return I(()=>t)}static \u0275fac=function(e){return new(e||i)(S(O))};static \u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"})};export{u as a};
