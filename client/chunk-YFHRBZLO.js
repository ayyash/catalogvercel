import{a as q,b as W}from"./chunk-HBVKMVWM.js";import{b as Q,d as V}from"./chunk-EZ3FCO5Y.js";import{c as Y}from"./chunk-J6H3ZUJ6.js";import{$ as D,Ba as h,Ga as g,Ha as b,O as p,Q as O,R,Ta as N,Ua as z,Ya as H,c as w,ea as v,fa as S,g as _,ga as u,ha as r,hb as U,i as l,ia as o,ja as d,l as B,o as j,ob as J,pb as K,s as A,sb as $,t as F,vb as y,w as G,xa as s,ya as P,z as L}from"./chunk-2RYABZQO.js";var k={};function X(i){return function(t,e,a){let m=a.value,n=i?.key||`${t.constructor.name}.${e}`;return a.value=function(...f){let x=i?.withArgs?`${n}_${JSON.stringify(f)}`:n,E=this.storageService.getItem(x);if(E)return _(E).pipe($("Cached "+n));let M=()=>{let T=this.storageService.getItem(x);return T?_(T).pipe($("Cached "+n)):(k[n]=!0,m.apply(this,f).pipe(F(Z=>{this.storageService.setItem(x,Z,i?.expiresin)}),j(()=>{delete k[n]})))};return k[n]?B(y.Basic.lockTimeout).pipe(A(M)):M()},a}}var c=class c{constructor(t,e){this._http=t;this.storageService=e}_tagsUrl=y.API.stat.tags;GetStats(t={}){let e=K(Q.MapSearchListOptions(t)),a=this._tagsUrl.replace(":options",e);return this._http.get(a).pipe(l(m=>V.NewInstances(m)))}static \u0275fac=function(e){return new(e||c)(L(H),L(Y))};static \u0275prov=G({token:c,factory:c.\u0275fac,providedIn:"root"})};w([X()],c.prototype,"GetStats",1);var I=c;function ie(i,t){if(i&1&&(r(0,"li"),d(1,"cl-post-card",10),o()),i&2){let e=t.$implicit;p(),D("post",e)}}function re(i,t){if(i&1&&(r(0,"li"),d(1,"cl-post-card",10),o()),i&2){let e=t.$implicit;p(),D("post",e)}}function oe(i,t){if(i&1&&(r(0,"li",9)(1,"a",11),s(2),o(),r(3,"div",4),s(4),o()()),i&2){let e=t.$implicit;p(2),P(e.tag),p(2),P(e.votes)}}var C=class i{constructor(t,e){this.postService=t;this.statService=e}recent$;voted$;stats$;ngOnInit(){this.recent$=this.postService.GetPosts({size:2,sort:{by:"date"}}).pipe(l(t=>t.matches)),this.voted$=this.postService.GetPosts({size:2,sort:{by:"votes"}}).pipe(l(t=>t.matches)),this.stats$=this.statService.GetStats()}static \u0275fac=function(e){return new(e||i)(O(W),O(I))};static \u0275cmp=R({type:i,selectors:[["app-dashboard-list"]],decls:33,vars:6,consts:[[1,"page"],[1,"container"],[1,"box","box-grey-light","card","spaced"],[1,"liga"],[1,"tail"],["routerLink","/account/posts"],[1,"f6","spaced"],[1,"rowlist","doublespaced"],[1,"rowlist","row-spaced","uc-6"],[1,"card"],[3,"post"],["routerLink","/posts"]],template:function(e,a){if(e&1&&(r(0,"div",0)(1,"div",1),h(2),g(3,"async"),h(4),g(5,"async"),h(6),g(7,"async"),r(8,"div",2)(9,"span")(10,"i",3),s(11,"info"),o(),s(12," You have 2 draft ideas."),o(),r(13,"div",4)(14,"a",5),s(15,"My drafts"),o()()(),r(16,"h6",6),s(17,"Most recently added"),o(),r(18,"ul",7),S(19,ie,2,1,"li",null,v),o(),d(21,"hr"),r(22,"h6",6),s(23,"Most voted for"),o(),r(24,"ul",7),S(25,re,2,1,"li",null,v),o(),d(27,"hr"),r(28,"h6",6),s(29,"Ideas per tag"),o(),r(30,"ul",8),S(31,oe,5,2,"li",9,v),o()()()),e&2){let m=b(3,0,a.voted$),n=b(5,2,a.recent$),f=b(7,4,a.stats$);p(19),u(n),p(6),u(m),p(6),u(f)}},dependencies:[z,N,J,U,q],encapsulation:2,changeDetection:0})};var Me=[{path:"",component:C}];export{Me as DashboardRoutes};
